<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced HTML Code Editor - বন্ধু</title>
    <style>
        :root {
            --primary-bg: #1e1e1e;
            --secondary-bg: #252526;
            --header-bg: #333333;
            --border-color: #4a4a4a;
            --text-color: #e0e0e0;
            --accent-color: #007acc;
            --accent-hover: #0098e6;
            --success-color: #4CAF50;
            --warning-color: #ff9800;
            --error-color: #f44336;
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --z-modal: 1000;
            --z-settings: 900;
            --z-dropdown: 800;
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: var(--font-family);
            background-color: var(--primary-bg);
            color: var(--text-color);
            overflow: hidden;
        }

        .main-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--header-bg);
            padding: 10px 20px;
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 10px;
        }

        .header h1 {
            margin: 0;
            font-size: 1.4em;
            color: #ffffff;
        }

        .controls-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .button-row {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }
        
        .btn {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
            position: relative;
        }

        .btn:hover {
            background-color: #4d4d4d;
        }

        .btn.primary {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            color: white;
        }

        .btn.primary:hover {
            background-color: var(--accent-hover);
        }

        .btn.success {
            background-color: var(--success-color);
            border-color: var(--success-color);
            color: white;
        }

        .btn.success:hover {
            background-color: #43a047;
        }

        .btn.dropdown-toggle::after {
            content: "▼";
            font-size: 0.6em;
            margin-left: 5px;
        }

        .content-wrapper {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            overflow: hidden;
        }

        .tab-nav {
            display: none;
            background-color: var(--header-bg);
        }

        .tab-nav .tab-btn {
            padding: 12px 15px;
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1em;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            position: relative;
        }
        
        .tab-nav .tab-btn.active {
            color: white;
            border-bottom: 3px solid var(--accent-color);
        }

        .editor-container {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .editor-box {
            flex: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 100px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .editor-box:last-child {
            border-bottom: none;
        }

        .editor-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--secondary-bg);
            padding: 5px 12px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .editor-title .copy-btn {
            background: #555;
            color: white;
            border: none;
            padding: 3px 8px;
            font-size: 0.8em;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .editor-instance-container {
            flex-grow: 1;
            position: relative;
        }

        .editor-instance {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        .status-bar {
            background-color: var(--secondary-bg);
            padding: 5px 10px;
            font-size: 0.8em;
            display: flex;
            justify-content: space-between;
            border-top: 1px solid var(--border-color);
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--success-color);
        }

        .status-indicator.warning {
            background-color: var(--warning-color);
        }

        .status-indicator.error {
            background-color: var(--error-color);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: var(--z-modal);
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: rgba(0,0,0,0.7);
            animation: fadeIn 0.3s;
        }
        
        .modal-content {
            background-color: var(--primary-bg);
            margin: 2% auto;
            border: 1px solid var(--border-color);
            width: 95%;
            height: 95%;
            max-width: 1200px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }
        
        .modal-header {
            padding: 10px 20px;
            background: var(--header-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }
        .modal-header h2 {
            margin: 0;
            font-size: 1.2em;
        }

        .close-button {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        .close-button:hover {
            color: white;
        }
        
        .modal-body {
            flex-grow: 1;
            padding: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-body iframe {
            width: 100%;
            height: 100%;
            border: none;
            background-color: #ffffff;
        }

        .preview-controls {
            padding: 8px 15px;
            background: var(--secondary-bg);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            gap: 10px;
        }

        .preview-controls .btn {
            padding: 5px 10px;
            font-size: 0.8em;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Settings Panel */
        .settings-panel {
            position: fixed;
            top: 0;
            right: -350px;
            width: 350px;
            height: 100%;
            background-color: var(--secondary-bg);
            border-left: 1px solid var(--border-color);
            z-index: var(--z-settings);
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .settings-panel.open {
            right: 0;
        }

        .settings-header {
            padding: 15px;
            background: var(--header-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-body {
            flex-grow: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .settings-group {
            margin-bottom: 20px;
        }

        .settings-group h3 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.1em;
            color: var(--accent-color);
        }

        .setting-item {
            margin-bottom: 15px;
        }

        .setting-item label {
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .setting-item .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .setting-item .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .setting-item .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #555;
            transition: .4s;
            border-radius: 24px;
        }

        .setting-item .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        .setting-item input:checked + .slider {
            background-color: var(--accent-color);
        }

        .setting-item input:checked + .slider:before {
            transform: translateX(26px);
        }

        .settings-footer {
            padding: 15px;
            border-top: 1px solid var(--border-color);
            text-align: right;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: var(--z-settings);
            display: none;
        }

        .overlay.active {
            display: block;
        }

        /* Dropdown Menu */
        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            right: 0;
            background-color: var(--secondary-bg);
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: var(--z-dropdown);
            border-radius: 5px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .dropdown-menu.show {
            display: block;
        }

        .dropdown-item {
            color: var(--text-color);
            padding: 10px 15px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .dropdown-item:hover {
            background-color: #4d4d4d;
        }

        .dropdown-divider {
            height: 1px;
            background-color: var(--border-color);
            margin: 5px 0;
        }

        /* Loading indicator */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 15px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8em;
        }

        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Mobile Responsive Design */
        @media (max-width: 768px) {
            .header {
                padding: 10px;
                flex-direction: column;
                align-items: flex-start;
            }
            .header h1 {
                font-size: 1.2em;
                margin-bottom: 10px;
            }
            .controls-container {
                width: 100%;
            }
            .button-row {
                justify-content: space-between;
                width: 100%;
            }
            .btn {
                padding: 6px 10px;
                font-size: 0.8em;
                flex-grow: 1;
                justify-content: center;
            }
            .tab-nav {
                display: flex;
            }
            .editor-title {
                display: none;
            }
            .editor-box {
                display: none;
                border-bottom: none;
            }
            .editor-box.active-editor {
                display: flex;
            }
            .modal-content {
                width: 100%;
                height: 100%;
                margin: 0;
                border-radius: 0;
            }
            .settings-panel {
                width: 90%;
                right: -90%;
            }
            .dropdown-menu {
                min-width: 150px;
            }
        }
    </style>
</head>
<body>

    <div class="main-container">
        <div class="header">
            <h1>Advanced Editor</h1>
            <div class="controls-container">
                <div class="button-row">
                    <button id="preview-btn" class="btn primary tooltip">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        প্রিভিউ
                        <span class="tooltiptext">লাইভ প্রিভিউ দেখুন (Ctrl+P)</span>
                    </button>
                    <button id="download-btn" class="btn tooltip">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        ডাউনলোড
                        <span class="tooltiptext">HTML ফাইল ডাউনলোড করুন (Ctrl+S)</span>
                    </button>
                    <button id="demo-btn" class="btn tooltip">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="12"></line>
                            <line x1="12" y1="16" x2="12.01" y2="16"></line>
                        </svg>
                        ডেমো
                        <span class="tooltiptext">ডেমো কোড লোড করুন</span>
                    </button>
                </div>
                <div class="button-row">
                    <button id="clear-btn" class="btn tooltip">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                        ক্লিয়ার
                        <span class="tooltiptext">সমস্ত কোড ক্লিয়ার করুন</span>
                    </button>
                    <button id="format-btn" class="btn success tooltip">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="16 3 21 3 21 8"></polyline>
                            <line x1="4" y1="20" x2="21" y2="3"></line>
                            <polyline points="21 16 21 21 16 21"></polyline>
                            <line x1="15" y1="15" x2="21" y2="21"></line>
                            <line x1="4" y1="4" x2="9" y2="9"></line>
                        </svg>
                        ফরম্যাট
                        <span class="tooltiptext">কোড ফরম্যাট করুন (Shift+Alt+F)</span>
                    </button>
                    <div class="dropdown">
                        <button id="functions-btn" class="btn dropdown-toggle tooltip">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            ফাংশন
                            <span class="tooltiptext">অতিরিক্ত ফাংশন মেনু</span>
                        </button>
                        <div id="functions-menu" class="dropdown-menu">
                            <div class="dropdown-item" id="copy-function">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                কপি
                            </div>
                            <div class="dropdown-item" id="paste-function">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                                </svg>
                                পেস্ট
                            </div>
                            <div class="dropdown-item" id="cut-function">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="6" cy="6" r="3"></circle>
                                    <circle cx="6" cy="18" r="3"></circle>
                                    <line x1="20" y1="4" x2="8.12" y2="15.88"></line>
                                    <line x1="14.47" y1="14.48" x2="20" y2="20"></line>
                                    <line x1="8.12" y1="8.12" x2="12" y2="12"></line>
                                </svg>
                                কাট
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-item" id="undo-function">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M3 10h10a10 10 0 0 1 10 10v1M3 10l6 6M3 10l6-6"></path>
                                </svg>
                                আনডু (Ctrl+Z)
                            </div>
                            <div class="dropdown-item" id="redo-function">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 10H11a10 10 0 0 0-10 10v1M21 10l-6 6M21 10l-6-6"></path>
                                </svg>
                                রিডু (Ctrl+Y)
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-item" id="select-all-function">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="4 17 10 11 4 5"></polyline>
                                    <line x1="12" y1="19" x2="20" y2="19"></line>
                                </svg>
                                সব সিলেক্ট (Ctrl+A)
                            </div>
                            <div class="dropdown-item" id="find-function">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                                খুঁজুন (Ctrl+F)
                            </div>
                            <div class="dropdown-item" id="replace-function">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                    <line x1="8" y1="7" x2="14" y2="7"></line>
                                    <line x1="8" y1="11" x2="14" y2="11"></line>
                                    <line x1="8" y1="15" x2="11" y2="15"></line>
                                </svg>
                                রিপ্লেস (Ctrl+H)
                            </div>
                        </div>
                    </div>
                    <button id="settings-btn" class="btn tooltip">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                        </svg>
                        সেটিংস
                        <span class="tooltiptext">এডিটর সেটিংস</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="content-wrapper">
            <div class="tab-nav">
                <button class="tab-btn active" data-lang="html">HTML</button>
                <button class="tab-btn" data-lang="css">CSS</button>
                <button class="tab-btn" data-lang="js">JavaScript</button>
            </div>
            <div class="editor-container">
                <div class="editor-box active-editor" data-lang="html">
                    <div class="editor-title">
                        <span>HTML</span>
                        <div>
                            <button class="copy-btn" data-editor="html">কপি</button>
                            <button class="copy-btn format-editor-btn" data-editor="html">ফরম্যাট</button>
                        </div>
                    </div>
                    <div class="editor-instance-container">
                        <div id="html-editor" class="editor-instance"></div>
                    </div>
                    <div class="status-bar">
                        <div class="status-item">
                            <span class="status-indicator"></span>
                            <span id="html-status">Ready</span>
                        </div>
                        <div class="status-item">
                            <span id="html-cursor">Ln 1, Col 1</span>
                        </div>
                    </div>
                </div>
                <div class="editor-box" data-lang="css">
                    <div class="editor-title">
                        <span>CSS</span>
                        <div>
                            <button class="copy-btn" data-editor="css">কপি</button>
                            <button class="copy-btn format-editor-btn" data-editor="css">ফরম্যাট</button>
                        </div>
                    </div>
                    <div class="editor-instance-container">
                        <div id="css-editor" class="editor-instance"></div>
                    </div>
                    <div class="status-bar">
                        <div class="status-item">
                            <span class="status-indicator"></span>
                            <span id="css-status">Ready</span>
                        </div>
                        <div class="status-item">
                            <span id="css-cursor">Ln 1, Col 1</span>
                        </div>
                    </div>
                </div>
                <div class="editor-box" data-lang="js">
                    <div class="editor-title">
                        <span>JavaScript</span>
                        <div>
                            <button class="copy-btn" data-editor="js">কপি</button>
                            <button class="copy-btn format-editor-btn" data-editor="js">ফরম্যাট</button>
                        </div>
                    </div>
                    <div class="editor-instance-container">
                        <div id="js-editor" class="editor-instance"></div>
                    </div>
                    <div class="status-bar">
                        <div class="status-item">
                            <span class="status-indicator"></span>
                            <span id="js-status">Ready</span>
                        </div>
                        <div class="status-item">
                            <span id="js-cursor">Ln 1, Col 1</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div id="preview-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Live Preview</h2>
                <span class="close-button">&times;</span>
            </div>
            <div class="preview-controls">
                <button id="refresh-preview" class="btn">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="23 4 23 10 17 10"></polyline>
                        <polyline points="1 20 1 14 7 14"></polyline>
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                    </svg>
                    রিফ্রেশ
                </button>
                <button id="open-new-tab" class="btn">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                        <polyline points="15 3 21 3 21 9"></polyline>
                        <line x1="10" y1="14" x2="21" y2="3"></line>
                    </svg>
                    নতুন ট্যাবে খুলুন
                </button>
            </div>
            <div class="modal-body">
                <iframe id="preview-frame" sandbox="allow-scripts allow-same-origin"></iframe>
            </div>
        </div>
    </div>

    <!-- Settings Panel -->
    <div id="overlay" class="overlay"></div>
    <div id="settings-panel" class="settings-panel">
        <div class="settings-header">
            <h2>Editor Settings</h2>
            <span id="close-settings" class="close-button">&times;</span>
        </div>
        <div class="settings-body">
            <div class="settings-group">
                <h3>Editor Features</h3>
                <div class="setting-item">
                    <label>
                        Auto Completion
                        <span class="switch">
                            <input type="checkbox" id="auto-completion" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        HTML Tag Suggestions
                        <span class="switch">
                            <input type="checkbox" id="html-suggestions" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        HTML Attribute Suggestions
                        <span class="switch">
                            <input type="checkbox" id="attribute-suggestions" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        CSS Property Suggestions
                        <span class="switch">
                            <input type="checkbox" id="css-suggestions" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        JavaScript Suggestions
                        <span class="switch">
                            <input type="checkbox" id="js-suggestions" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        Auto Closing Tags
                        <span class="switch">
                            <input type="checkbox" id="auto-closing" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        Auto Indentation
                        <span class="switch">
                            <input type="checkbox" id="auto-indent" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        Format on Type
                        <span class="switch">
                            <input type="checkbox" id="format-on-type">
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        Syntax Highlighting
                        <span class="switch">
                            <input type="checkbox" id="syntax-highlight" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        Line Numbers
                        <span class="switch">
                            <input type="checkbox" id="line-numbers" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
            </div>
            <div class="settings-group">
                <h3>Editor Behavior</h3>
                <div class="setting-item">
                    <label>
                        Word Wrap
                        <span class="switch">
                            <input type="checkbox" id="word-wrap" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        Minimap
                        <span class="switch">
                            <input type="checkbox" id="minimap">
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        Smooth Scrolling
                        <span class="switch">
                            <input type="checkbox" id="smooth-scroll" checked>
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        Auto Preview
                        <span class="switch">
                            <input type="checkbox" id="auto-preview">
                            <span class="slider"></span>
                        </span>
                    </label>
                </div>
            </div>
            <div class="settings-group">
                <h3>Appearance</h3>
                <div class="setting-item">
                    <label>
                        Theme
                        <select id="editor-theme" class="btn" style="padding: 3px 8px; font-size: 0.9em;">
                            <option value="vs-dark">Dark</option>
                            <option value="vs">Light</option>
                            <option value="hc-black">High Contrast</option>
                        </select>
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        Font Size
                        <select id="font-size" class="btn" style="padding: 3px 8px; font-size: 0.9em;">
                            <option value="12">12px</option>
                            <option value="14" selected>14px</option>
                            <option value="16">16px</option>
                            <option value="18">18px</option>
                            <option value="20">20px</option>
                        </select>
                    </label>
                </div>
            </div>
        </div>
        <div class="settings-footer">
            <button id="reset-settings" class="btn">Reset to Default</button>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loading" class="loading" style="display: none;">
        <div class="loading-spinner"></div>
        <div>Loading Editor...</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs/loader.js"></script>
    <script>
        // Show loading indicator
        document.getElementById('loading').style.display = 'flex';
        
        let htmlEditor, cssEditor, jsEditor;
        const editors = {};
        let editorSettings = {
            autoCompletion: true,
            htmlSuggestions: true,
            attributeSuggestions: true,
            cssSuggestions: true,
            jsSuggestions: true,
            autoClosing: true,
            autoIndent: true,
            formatOnType: false,
            syntaxHighlight: true,
            lineNumbers: true,
            wordWrap: true,
            minimap: false,
            smoothScroll: true,
            autoPreview: false,
            theme: 'vs-dark',
            fontSize: 14
        };

        // Load settings from localStorage if available
        function loadSettings() {
            const savedSettings = localStorage.getItem('editorSettings');
            if (savedSettings) {
                editorSettings = JSON.parse(savedSettings);
                applySettingsToUI();
            }
        }

        // Save settings to localStorage
        function saveSettings() {
            localStorage.setItem('editorSettings', JSON.stringify(editorSettings));
        }

        // Apply settings to UI controls
        function applySettingsToUI() {
            document.getElementById('auto-completion').checked = editorSettings.autoCompletion;
            document.getElementById('html-suggestions').checked = editorSettings.htmlSuggestions;
            document.getElementById('attribute-suggestions').checked = editorSettings.attributeSuggestions;
            document.getElementById('css-suggestions').checked = editorSettings.cssSuggestions;
            document.getElementById('js-suggestions').checked = editorSettings.jsSuggestions;
            document.getElementById('auto-closing').checked = editorSettings.autoClosing;
            document.getElementById('auto-indent').checked = editorSettings.autoIndent;
            document.getElementById('format-on-type').checked = editorSettings.formatOnType;
            document.getElementById('syntax-highlight').checked = editorSettings.syntaxHighlight;
            document.getElementById('line-numbers').checked = editorSettings.lineNumbers;
            document.getElementById('word-wrap').checked = editorSettings.wordWrap;
            document.getElementById('minimap').checked = editorSettings.minimap;
            document.getElementById('smooth-scroll').checked = editorSettings.smoothScroll;
            document.getElementById('auto-preview').checked = editorSettings.autoPreview;
            document.getElementById('editor-theme').value = editorSettings.theme;
            document.getElementById('font-size').value = editorSettings.fontSize;
        }

        // Apply settings to editor instances
        function applyEditorSettings() {
            for (const editor of Object.values(editors)) {
                if (editor) {
                    editor.updateOptions({
                        quickSuggestions: editorSettings.autoCompletion,
                        suggestOnTriggerCharacters: editorSettings.autoCompletion,
                        autoClosingBrackets: editorSettings.autoClosing ? 'always' : 'never',
                        autoClosingQuotes: editorSettings.autoClosing ? 'always' : 'never',
                        autoClosingTags: editorSettings.autoClosing ? 'always' : 'never',
                        autoIndent: editorSettings.autoIndent ? 'advanced' : 'none',
                        formatOnType: editorSettings.formatOnType,
                        lineNumbers: editorSettings.lineNumbers ? 'on' : 'off',
                        wordWrap: editorSettings.wordWrap ? 'on' : 'off',
                        minimap: { enabled: editorSettings.minimap },
                        smoothScrolling: editorSettings.smoothScroll,
                        fontSize: parseInt(editorSettings.fontSize)
                    });
                    
                    monaco.editor.setTheme(editorSettings.theme);
                }
            }
        }

        // Format code in the specified editor
        function formatCode(editorKey) {
            if (editors[editorKey]) {
                editors[editorKey].getAction('editor.action.formatDocument').run();
            }
        }

        // Format all editors
        function formatAllCode() {
            formatCode('html');
            formatCode('css');
            formatCode('js');
        }

        // Initialize the editor
        function initializeEditor() {
            require.config({ paths: { 'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs' }});
            require(['vs/editor/editor.main'], function() {
                loadSettings();
                
                const commonEditorOptions = {
                    automaticLayout: true,
                    scrollBeyondLastLine: false,
                    roundedSelection: false,
                    readOnly: false,
                    cursorStyle: 'line',
                    cursorBlinking: 'smooth',
                    renderWhitespace: 'selection',
                    renderControlCharacters: true,
                    fontLigatures: false,
                    mouseWheelZoom: true,
                    scrollbar: {
                        vertical: 'auto',
                        horizontal: 'auto',
                        useShadows: true,
                        verticalScrollbarSize: 10,
                        horizontalScrollbarSize: 10
                    },
                    ...editorSettings
                };

                // Create editors with initial settings
                editors.html = monaco.editor.create(document.getElementById('html-editor'), {
                    ...commonEditorOptions,
                    value: localStorage.getItem('htmlCode') || '<!DOCTYPE html>\n<html lang="bn">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>আমার ওয়েবসাইট</title>\n</head>\n<body>\n    <h1>হ্যালো বন্ধু!</h1>\n    <p>এটি একটি HTML এডিটর</p>\n</body>\n</html>',
                    language: 'html',
                    theme: editorSettings.theme
                });

                editors.css = monaco.editor.create(document.getElementById('css-editor'), {
                    ...commonEditorOptions,
                    value: localStorage.getItem('cssCode') || 'body {\n    font-family: Arial, sans-serif;\n    line-height: 1.6;\n    margin: 0;\n    padding: 20px;\n    background-color: #f5f5f5;\n}\n\nh1 {\n    color: #007acc;\n}',
                    language: 'css',
                    theme: editorSettings.theme
                });

                editors.js = monaco.editor.create(document.getElementById('js-editor'), {
                    ...commonEditorOptions,
                    value: localStorage.getItem('jsCode') || '// আপনার JavaScript কোড এখানে লিখুন\nconsole.log("হ্যালো বন্ধু!");\n\nfunction greet(name) {\n    alert("হ্যালো, " + name + "!");\n}\n\ngreet("বন্ধু");',
                    language: 'javascript',
                    theme: editorSettings.theme
                });

                // Apply all settings
                applyEditorSettings();

                // Hide loading indicator
                document.getElementById('loading').style.display = 'none';

                // Set up cursor position indicators
                setupCursorPositionTracking();
                
                // Set up auto-save functionality
                setupAutoSave();
                
                // Set up auto-preview if enabled
                if (editorSettings.autoPreview) {
                    setupAutoPreview();
                }
            });
        }

        // Set up cursor position tracking for status bar
        function setupCursorPositionTracking() {
            editors.html.onDidChangeCursorPosition(function(e) {
                document.getElementById('html-cursor').textContent = `Ln ${e.position.lineNumber}, Col ${e.position.column}`;
            });
            
            editors.css.onDidChangeCursorPosition(function(e) {
                document.getElementById('css-cursor').textContent = `Ln ${e.position.lineNumber}, Col ${e.position.column}`;
            });
            
            editors.js.onDidChangeCursorPosition(function(e) {
                document.getElementById('js-cursor').textContent = `Ln ${e.position.lineNumber}, Col ${e.position.column}`;
            });
        }

        // Set up auto-save functionality
        function setupAutoSave() {
            editors.html.onDidChangeModelContent(function() {
                localStorage.setItem('htmlCode', editors.html.getValue());
            });
            
            editors.css.onDidChangeModelContent(function() {
                localStorage.setItem('cssCode', editors.css.getValue());
            });
            
            editors.js.onDidChangeModelContent(function() {
                localStorage.setItem('jsCode', editors.js.getValue());
            });
        }

        // Set up auto-preview functionality
        function setupAutoPreview() {
            let previewTimeout;
            
            function updatePreview() {
                clearTimeout(previewTimeout);
                previewTimeout = setTimeout(() => {
                    if (document.getElementById('preview-modal').style.display === 'block') {
                        document.getElementById('preview-frame').srcdoc = getFullHtml();
                    }
                }, 1000);
            }
            
            editors.html.onDidChangeModelContent(updatePreview);
            editors.css.onDidChangeModelContent(updatePreview);
            editors.js.onDidChangeModelContent(updatePreview);
        }

        // Generate full HTML document from all editors
        function getFullHtml() {
            try {
                const htmlCode = editors.html.getValue();
                const cssCode = editors.css.getValue();
                const jsCode = editors.js.getValue();
                
                return `
                    <!DOCTYPE html>
                    <html lang="bn">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>Output</title>
                        <style>${cssCode}</style>
                    </head>
                    <body>
                        ${htmlCode}
                        <script>${jsCode}<\/script>
                    </body>
                    </html>
                `;
            } catch (error) {
                console.error("Error generating preview:", error);
                return `<html><body><h1 style="color:red">Error generating preview</h1><p>${error.message}</p></body></html>`;
            }
        }
        
        // Initialize editor when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeEditor);

        // Modal functionality
        const previewModal = document.getElementById('preview-modal');
        const previewBtn = document.getElementById('preview-btn');
        const closeBtn = previewModal.querySelector('.close-button');
        const previewFrame = document.getElementById('preview-frame');
        const refreshPreviewBtn = document.getElementById('refresh-preview');
        const openNewTabBtn = document.getElementById('open-new-tab');

        previewBtn.onclick = () => {
            const fullHtml = getFullHtml();
            const blob = new Blob([fullHtml], { type: 'text/html' });
            previewFrame.src = URL.createObjectURL(blob);
            previewModal.style.display = 'block';
        };

        refreshPreviewBtn.onclick = () => {
            const fullHtml = getFullHtml();
            const blob = new Blob([fullHtml], { type: 'text/html' });
            previewFrame.src = URL.createObjectURL(blob);
        };

        openNewTabBtn.onclick = () => {
            const fullHtml = getFullHtml();
            const blob = new Blob([fullHtml], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            window.open(url, '_blank');
        };

        closeBtn.onclick = () => { 
            previewModal.style.display = 'none';
            URL.revokeObjectURL(previewFrame.src);
            previewFrame.src = '';
        };

        window.onclick = (event) => {
            if (event.target == previewModal) {
                previewModal.style.display = 'none';
                URL.revokeObjectURL(previewFrame.src);
                previewFrame.src = '';
            }
        };
        
        // Button controls
        document.getElementById('demo-btn').addEventListener('click', () => {
            editors.html.setValue('<!DOCTYPE html>\n<html>\n<body>\n  <h1 id="title">একটি ডেমো পেজ</h1>\n  <p>এই বাটনে ক্লিক করে দেখুন।</p>\n  <button onclick="changeTitle()">শিরোনাম পরিবর্তন করুন</button>\n</body>\n</html>');
            editors.css.setValue('body { font-family: sans-serif; text-align: center; padding-top: 50px; }\nbutton { padding: 10px 20px; border-radius: 5px; cursor: pointer; background: #007acc; color: white; border: none; }\nbutton:hover { background: #0098e6; }');
            editors.js.setValue('function changeTitle() {\n  document.getElementById("title").innerText = "শিরোনাম পরিবর্তিত হয়েছে!";\n}');
        });

        document.getElementById('clear-btn').addEventListener('click', () => {
            if (confirm('আপনি কি নিশ্চিত যে আপনি সব এডিটর ক্লিয়ার করতে চান?')) {
                editors.html.setValue('');
                editors.css.setValue('');
                editors.js.setValue('');
            }
        });

        document.getElementById('download-btn').addEventListener('click', () => {
            const blob = new Blob([getFullHtml()], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'index.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(a.href);
        });
        
        // Format button functionality
        document.getElementById('format-btn').addEventListener('click', formatAllCode);
        
        // Format buttons for individual editors
        document.querySelectorAll('.format-editor-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const editorKey = btn.dataset.editor;
                formatCode(editorKey);
            });
        });

        // Copy buttons
        document.querySelectorAll('.copy-btn:not(.format-editor-btn)').forEach(btn => {
            btn.addEventListener('click', () => {
                const editorKey = btn.dataset.editor;
                const code = editors[editorKey].getValue();
                navigator.clipboard.writeText(code).then(() => {
                    const originalText = btn.innerText;
                    btn.innerText = 'কপি হয়েছে!';
                    btn.style.backgroundColor = 'var(--success-color)';
                    setTimeout(() => {
                        btn.innerText = originalText;
                        btn.style.backgroundColor = '#555';
                    }, 2000);
                });
            });
        });

        // Mobile tab navigation
        const tabBtns = document.querySelectorAll('.tab-btn');
        const editorBoxes = document.querySelectorAll('.editor-box');
        
        tabBtns.forEach(tab => {
            tab.addEventListener('click', () => {
                const lang = tab.dataset.lang;

                tabBtns.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                editorBoxes.forEach(box => {
                    if (box.dataset.lang === lang) {
                        box.classList.add('active-editor');
                    } else {
                        box.classList.remove('active-editor');
                    }
                });
            });
        });

        // Settings panel functionality
        const settingsBtn = document.getElementById('settings-btn');
        const settingsPanel = document.getElementById('settings-panel');
        const closeSettingsBtn = document.getElementById('close-settings');
        const overlay = document.getElementById('overlay');
        const resetSettingsBtn = document.getElementById('reset-settings');

        settingsBtn.addEventListener('click', () => {
            settingsPanel.classList.add('open');
            overlay.classList.add('active');
        });

        closeSettingsBtn.addEventListener('click', () => {
            settingsPanel.classList.remove('open');
            overlay.classList.remove('active');
        });

        overlay.addEventListener('click', () => {
            settingsPanel.classList.remove('open');
            overlay.classList.remove('active');
        });

        // Settings controls
        document.getElementById('auto-completion').addEventListener('change', function() {
            editorSettings.autoCompletion = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('html-suggestions').addEventListener('change', function() {
            editorSettings.htmlSuggestions = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('attribute-suggestions').addEventListener('change', function() {
            editorSettings.attributeSuggestions = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('css-suggestions').addEventListener('change', function() {
            editorSettings.cssSuggestions = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('js-suggestions').addEventListener('change', function() {
            editorSettings.jsSuggestions = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('auto-closing').addEventListener('change', function() {
            editorSettings.autoClosing = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('auto-indent').addEventListener('change', function() {
            editorSettings.autoIndent = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('format-on-type').addEventListener('change', function() {
            editorSettings.formatOnType = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('syntax-highlight').addEventListener('change', function() {
            editorSettings.syntaxHighlight = this.checked;
            saveSettings();
        });

        document.getElementById('line-numbers').addEventListener('change', function() {
            editorSettings.lineNumbers = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('word-wrap').addEventListener('change', function() {
            editorSettings.wordWrap = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('minimap').addEventListener('change', function() {
            editorSettings.minimap = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('smooth-scroll').addEventListener('change', function() {
            editorSettings.smoothScroll = this.checked;
            saveSettings();
            applyEditorSettings();
        });

        document.getElementById('auto-preview').addEventListener('change', function() {
            editorSettings.autoPreview = this.checked;
            saveSettings();
            if (this.checked) {
                setupAutoPreview();
            }
        });

        document.getElementById('editor-theme').addEventListener('change', function() {
            editorSettings.theme = this.value;
            saveSettings();
            monaco.editor.setTheme(this.value);
        });

        document.getElementById('font-size').addEventListener('change', function() {
            editorSettings.fontSize = parseInt(this.value);
            saveSettings();
            applyEditorSettings();
        });

        resetSettingsBtn.addEventListener('click', () => {
            if (confirm('আপনি কি নিশ্চিত যে আপনি সেটিংস রিসেট করতে চান?')) {
                editorSettings = {
                    autoCompletion: true,
                    htmlSuggestions: true,
                    attributeSuggestions: true,
                    cssSuggestions: true,
                    jsSuggestions: true,
                    autoClosing: true,
                    autoIndent: true,
                    formatOnType: false,
                    syntaxHighlight: true,
                    lineNumbers: true,
                    wordWrap: true,
                    minimap: false,
                    smoothScroll: true,
                    autoPreview: false,
                    theme: 'vs-dark',
                    fontSize: 14
                };
                applySettingsToUI();
                saveSettings();
                applyEditorSettings();
            }
        });

        // Functions dropdown menu
        const functionsBtn = document.getElementById('functions-btn');
        const functionsMenu = document.getElementById('functions-menu');

        functionsBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            functionsMenu.classList.toggle('show');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            functionsMenu.classList.remove('show');
        });

        // Dropdown item functionality
        document.getElementById('copy-function').addEventListener('click', () => {
            const activeEditor = document.querySelector('.editor-box.active-editor');
            if (activeEditor) {
                const editorKey = activeEditor.dataset.lang;
                const code = editors[editorKey].getValue();
                navigator.clipboard.writeText(code);
            }
        });

        document.getElementById('paste-function').addEventListener('click', async () => {
            const activeEditor = document.querySelector('.editor-box.active-editor');
            if (activeEditor) {
                const editorKey = activeEditor.dataset.lang;
                const text = await navigator.clipboard.readText();
                editors[editorKey].executeEdits("", [
                    {
                        range: editors[editorKey].getSelection(),
                        text: text,
                        forceMoveMarkers: true
                    }
                ]);
            }
        });

        document.getElementById('cut-function').addEventListener('click', () => {
            const activeEditor = document.querySelector('.editor-box.active-editor');
            if (activeEditor) {
                const editorKey = activeEditor.dataset.lang;
                const selection = editors[editorKey].getSelection();
                const text = editors[editorKey].getModel().getValueInRange(selection);
                navigator.clipboard.writeText(text);
                editors[editorKey].executeEdits("", [
                    {
                        range: selection,
                        text: "",
                        forceMoveMarkers: true
                    }
                ]);
            }
        });

        document.getElementById('undo-function').addEventListener('click', () => {
            const activeEditor = document.querySelector('.editor-box.active-editor');
            if (activeEditor) {
                const editorKey = activeEditor.dataset.lang;
                editors[editorKey].getModel().undo();
            }
        });

        document.getElementById('redo-function').addEventListener('click', () => {
            const activeEditor = document.querySelector('.editor-box.active-editor');
            if (activeEditor) {
                const editorKey = activeEditor.dataset.lang;
                editors[editorKey].getModel().redo();
            }
        });

        document.getElementById('select-all-function').addEventListener('click', () => {
            const activeEditor = document.querySelector('.editor-box.active-editor');
            if (activeEditor) {
                const editorKey = activeEditor.dataset.lang;
                editors[editorKey].setSelection(editors[editorKey].getModel().getFullModelRange());
            }
        });

        document.getElementById('find-function').addEventListener('click', () => {
            const activeEditor = document.querySelector('.editor-box.active-editor');
            if (activeEditor) {
                const editorKey = activeEditor.dataset.lang;
                editors[editorKey].getAction('actions.find').run();
            }
        });

        document.getElementById('replace-function').addEventListener('click', () => {
            const activeEditor = document.querySelector('.editor-box.active-editor');
            if (activeEditor) {
                const editorKey = activeEditor.dataset.lang;
                editors[editorKey].getAction('editor.action.startFindReplaceAction').run();
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl+P for preview
            if (e.ctrlKey && e.key === 'p') {
                e.preventDefault();
                document.getElementById('preview-btn').click();
            }
            
            // Ctrl+S for save/download
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                document.getElementById('download-btn').click();
            }
            
            // Shift+Alt+F for format all
            if (e.shiftKey && e.altKey && e.key === 'F') {
                e.preventDefault();
                formatAllCode();
            }
            
            // Ctrl+Z for undo
            if (e.ctrlKey && e.key === 'z') {
                e.preventDefault();
                const activeEditor = document.querySelector('.editor-box.active-editor');
                if (activeEditor) {
                    const editorKey = activeEditor.dataset.lang;
                    editors[editorKey].getModel().undo();
                }
            }
            
            // Ctrl+Y for redo
            if (e.ctrlKey && e.key === 'y') {
                e.preventDefault();
                const activeEditor = document.querySelector('.editor-box.active-editor');
                if (activeEditor) {
                    const editorKey = activeEditor.dataset.lang;
                    editors[editorKey].getModel().redo();
                }
            }
            
            // Ctrl+A for select all
            if (e.ctrlKey && e.key === 'a') {
                e.preventDefault();
                const activeEditor = document.querySelector('.editor-box.active-editor');
                if (activeEditor) {
                    const editorKey = activeEditor.dataset.lang;
                    editors[editorKey].setSelection(editors[editorKey].getModel().getFullModelRange());
                }
            }
            
            // Ctrl+F for find
            if (e.ctrlKey && e.key === 'f') {
                e.preventDefault();
                const activeEditor = document.querySelector('.editor-box.active-editor');
                if (activeEditor) {
                    const editorKey = activeEditor.dataset.lang;
                    editors[editorKey].getAction('actions.find').run();
                }
            }
            
            // Ctrl+H for replace
            if (e.ctrlKey && e.key === 'h') {
                e.preventDefault();
                const activeEditor = document.querySelector('.editor-box.active-editor');
                if (activeEditor) {
                    const editorKey = activeEditor.dataset.lang;
                    editors[editorKey].getAction('editor.action.startFindReplaceAction').run();
                }
            }
        });

        // Handle window resize for better editor layout
        window.addEventListener('resize', function() {
            if (editors.html) editors.html.layout();
            if (editors.css) editors.css.layout();
            if (editors.js) editors.js.layout();
        });
    </script>
</body>
</html>
